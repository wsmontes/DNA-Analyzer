<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DNA Explorer</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <div class="container header-content">
      <a href="#" class="logo">
        <span>DNA</span>
        <h1>DNA Explorer</h1>
      </a>
    </div>
  </header>

  <main class="container">
    <div class="upload-area" id="uploadArea">
      <h2>Upload Your DNA Data</h2>
      <p>Upload your MyHeritage DNA ZIP file to begin analysis</p>
      <div class="file-input-wrapper">
        <button class="btn btn-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
          </svg>
          Select DNA File
        </button>
        <input type="file" id="fileInput" accept=".zip" class="file-input" />
      </div>
    </div>

    <div id="loading">
      <span class="spinner"></span>
      Processing DNA data...
    </div>

    <section id="dashboard" class="dashboard section" style="display: none;"></section>

    <section id="insightSection" class="section" style="display: none;">
      <div class="section-header">
        <h2 class="section-title">Key Insights</h2>
      </div>
      <div class="insights-wrapper">
        <div id="insights"></div>
        <div id="traits"></div>
      </div>
    </section>
    
    <div class="section" id="dataSection" style="display: none;">
      <div class="section-header">
        <h2 class="section-title">DNA Data Analysis</h2>
        <button id="downloadBtn" class="btn btn-outline">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
          </svg>
          Download Report
        </button>
      </div>
      
      <div class="filters">
        <input type="text" id="searchInput" placeholder="Search by rsID..." class="search-input" />
        <select id="chromFilter">
          <option value="">All chromosomes</option>
        </select>
      </div>

      <div class="tab-container">
        <div class="tab-bar" id="tab-bar">
          <button class="tab-btn active" data-tab="table">All SNPs</button>
          <button class="tab-btn" data-tab="traits">Health & Traits</button>
          <button class="tab-btn" data-tab="genes">Gene Analysis</button>
          <button class="tab-btn" data-tab="charts">Charts</button>
        </div>
        
        <div class="tab-content">
          <div id="table" class="tab-panel active"></div>
          <div id="traits" class="tab-panel"></div>
          <div id="genes" class="tab-panel">
            <div id="geneAnalysisContent">
              <p class="info-panel">
                Click the "Prioritized Gene Analysis" button below to analyze your DNA data for medically relevant genes.
                This will find SNPs associated with important genes known to have health implications.
              </p>
            </div>
          </div>
          <div id="charts" class="tab-panel">
            <div class="chart-grid">
              <div class="chart-container">
                <h3>Distribution of Genotypes</h3>
                <canvas id="genoChart" width="600" height="300"></canvas>
              </div>
              <div class="chart-container">
                <h3>SNPs by Chromosome</h3>
                <canvas id="chromChart" width="600" height="300"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div id="pagination" class="pagination"></div>
    </div>

    <div id="details" class="details-card" style="display: none;"></div>
  </main>

  <!-- Footer will be added via JavaScript for proper attribution -->

  <script type="module" src="js/main.js"></script>
</body>
</html>
